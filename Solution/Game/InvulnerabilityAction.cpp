#include "stdafx.h"

#include "Entity.h"
#include "PostMaster.h"
#include "InvulnerabilityAction.h"
#include "SpawnEnemyMessage.h"
#include <XMLReader.h>
#include <TimerManager.h>

InvulnerabilityAction::InvulnerabilityAction(XMLReader& aReader, tinyxml2::XMLElement* aElement
		, Entity& aPlayer)
	: myPlayer(aPlayer)
{
	int duration;
	aReader.ForceReadAttribute(aReader.ForceFindFirstChild(aElement, "duration"), "value", duration);

	myInvulnerabilityNote = new PowerUpNote(ePowerUpType::INVULNERABLITY, "", 0, duration);
}

InvulnerabilityAction::~InvulnerabilityAction()
{
	delete myInvulnerabilityNote;
}

void InvulnerabilityAction::OnEnter()
{
	myPlayer.SendNote(*myInvulnerabilityNote);
}


void InvulnerabilityAction::OnExit()
{

}

bool InvulnerabilityAction::Update()
{
	return true;
}